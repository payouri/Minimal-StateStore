<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>StateModel.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-EventDispatcher.EventDispatcher.html">EventDispatcher</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-StateModel.StateModel.html">StateModel</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html">StateStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html#._initHandlers">_initHandlers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html#._initState">_initState</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-EventDispatcher.html">EventDispatcher</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~addEventListener">addEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~dispatchEvent">dispatchEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~hasEventListener">hasEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~removeEventListener">removeEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~removeEventListeners">removeEventListeners</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-StateModel.html">StateModel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~checkValid">checkValid</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~destroyFields">destroyFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~setField">setField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~toggleShallow">toggleShallow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~unsetField">unsetField</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-StateStore.html">StateStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~clearState">clearState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setHandler">setHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setModelField">setModelField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setState">setState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~toggleShallowValidation">toggleShallowValidation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~unsetHandler">unsetHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~unsetModelField">unsetModelField</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">StateModel.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module StateModel */

/**
 * @typedef  
*/

/** Serves the purpose of validating data types through it's checkValid method */
export class StateModel {
    /** @constructor */
    constructor(fields = null, { shallowValidation = false } = {}) {
        this._shallow = !!shallowValidation
        this._fields = fields
    }
    /**
     * @method toggleShallow 
     * @description Toggle {@link module:StateModel~shallow shallow} property.
    */
    toggleShallow() {
        this._shallow = !this._shallow
        return this._shallow
    }
    /**
     * @readonly
     * @description Shallow property determines the StateModel Instance behaviour
     * concerning field validation when a 
     * @member shallow 
     * @type {Boolean}
    */
    get shallow() {
        return this._shallow
    }
    /**
     * @method destroyFields
     * @description Drop model fields. Cancel validation at the same time.
    */
    destroyFields() {
        this._fields = null
    }
    /**
     * @method unsetField
     * @description Unset model property.
     * @param {String} field 
    */
    unsetField(field) {
        delete this._fields[field]
    }
    /**
     * @method setField
     * @description Set fields property.
     * @param {String} field 
     * @param {String|Array|Function} value
    */
    setField(field, value) {
        if (!this._fields) {
            this._fields = {}
        }
        this._fields[field] = value
    }
    /**
     * @member {Object.&lt;string, (String|Array|Function)>} fields
     * @description Represents the actual properties that will be tested.
    */
    get fields() {
        return this._fields ? { ...this._fields } : null
    }
    /**
     * @method checkValid
     * @description Indicates if the tested value passes model validation.
     * @param {String} prop  
     * @param {any} value 
     * @param {Object.&lt;string, any>} [fields] 
     * 
     * @returns {Boolean} 
     */
    checkValid(prop, value, fields) {

        const propToValidate = typeof fields == 'object' &amp;&amp; fields[prop] || this._fields[prop]

        if (this._shallow &amp;&amp; !propToValidate)
            return true

        else if (!this._shallow &amp;&amp; !propToValidate)
            return false

        else {
            if (Array.isArray(propToValidate) &amp;&amp; (propToValidate.indexOf(value) > -1 || propToValidate.indexOf(typeof value) > -1))
                return true
            else if (propToValidate instanceof RegExp)
                return propToValidate.test(value)
            else if (typeof propToValidate == 'object') {
                if (Object.keys(propToValidate).length !== Object.keys(value).length &amp;&amp; !this._shallow)
                    return false
                for (let p in propToValidate) {
                    if (!this.checkValid(p, value[p], propToValidate))
                        return false
                }
                return true
            }
            else if (typeof propToValidate == 'function')
                return propToValidate(value)
            else if (typeof propToValidate == 'string' &amp;&amp; typeof value === propToValidate)
                return true
            else
                return false
        }

    }
}

export default StateModel</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Thu Jun 04 2020 16:13:38 GMT+0200 (GMT+02:00) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
