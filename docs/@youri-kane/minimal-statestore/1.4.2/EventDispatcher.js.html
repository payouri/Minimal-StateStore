<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EventDispatcher.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-EventDispatcher.EventDispatcher.html">EventDispatcher</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-StateModel.StateModel.html">StateModel</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html">StateStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html#._initHandlers">_initHandlers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.StateStore.html#._initState">_initState</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-EventDispatcher.html">EventDispatcher</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~addEventListener">addEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~dispatchEvent">dispatchEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~hasEventListener">hasEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~removeEventListener">removeEventListener</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-EventDispatcher.html#~removeEventListeners">removeEventListeners</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-StateModel.html">StateModel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~checkValid">checkValid</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~destroyFields">destroyFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~setField">setField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~toggleShallow">toggleShallow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateModel.html#~unsetField">unsetField</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-StateStore.html">StateStore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~clearState">clearState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setHandler">setHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setModelField">setModelField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~setState">setState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~toggleShallowValidation">toggleShallowValidation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~unsetHandler">unsetHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-StateStore.html#~unsetModelField">unsetModelField</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">EventDispatcher.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module EventDispatcher */

/** 
 * Mimic DOM Element event binding.
 * Purpose is to be able to attach listener to js object 
*/
export class EventDispatcher {

    constructor() {
        this._listeners = []
        this.hasEventListener = this.hasEventListener.bind(this)
        this.addEventListener = this.addEventListener.bind(this)
        this.removeEventListener = this.removeEventListener.bind(this)
        this.dropEventListeners = this.dropEventListeners.bind(this)
        this.dispatchEvent = this.dispatchEvent.bind(this)
    }

    /**
     * @method hasEventListener
     * @description Indicated if a listener function is already registered for a specific event.
     * 
     * @param {String} type 
     * @param {Function} listener 
     * @returns {Boolean}
     */
    hasEventListener(type, listener) {
        return this._listeners.some(item => item.type === type &amp;&amp; item.listener === listener)
    }

    /**
     * @method addEventListener
     * @description Add a listener for a specific event type.
     * 
     * @param {String} type event type
     * @param {Function} listener handler function
     * @param {Boolean} once if set handler function will be called only once. 
     * 
     * @returns {EventDispatcher} Instance
     */
    addEventListener(type, listener, once) {
        if (typeof listener === 'function' &amp;&amp; !this.hasEventListener(type, listener)) {
            this._listeners.push({ type, listener, options: { once: once ? !!once : false } })
        }
        return this
    }

    /**
     * @method removeEventListener
     * @description Remove a listener for a specific event type.
     * 
     * @param {String} type event type
     * @param {Function} listener handler function
     * 
     * @returns {EventDispatcher} Instance
     */
    removeEventListener(type, listener) {
        let index = this._listeners.findIndex(item => item.type === type &amp;&amp; item.listener === listener)
        if (index >= 0) this._listeners.splice(index, 1)
        return this
    }

    /**
     * @method removeEventListeners
     * @description Drop all event listeners.
     * 
     * @returns {EventDispatcher} Instance
    */
    dropEventListeners() {
        this._listeners = []
        return this
    }

    /**
     * @method dispatchEvent
     * @description Call all registered listeners that match the event type.
     * 
     * @param {CustomEvent} event event to be dispatched
     * @returns {EventDispatcher} Instance.
    */
    dispatchEvent(event) {
        for(let index = 0, n = this._listeners.length; index &lt; n; index++) {
            const { type, listener, options: { once } } = this._listeners[index]
            if(type === event.type) {
                listener.call(this, event)
                if(once === true) this.removeEventListener(type, listener)
            }
        }
        return this
    }
}</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Thu Jun 04 2020 16:19:19 GMT+0200 (GMT+02:00) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
